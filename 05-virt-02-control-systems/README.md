# Ответы на домашнее задание к занятию "5.2. Системы управления виртуализацией"

## Задача 1 

Выберете подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований  
Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий 
2. Требуется наиболее производительное бесплатное opensource решение для виртуализации небольшой (20 серверов) инфраструктуры Linux и Windows виртуальных машин
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры 
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux

## Ответ:
1. VMware vSphere или Hyper-V. Оба этих продукта позволяют организовать работу как с Linux, так и Windows, оба платные. Однако, учитывая возможные потери Hyper-V на необходимость установки ОС для работы слоя гипервизора, приоритетнее использовать **VMware vSphere**, т.к. он является автономным гипервизором и работает на аппаратном уровне.
2. И KVM и Xen хорошо справятся с этой задачей, но для большей стабильности приоритет за **Xen**.
3. У бесплатного VMware vSphere сильно урезан функционал, KVM - бесплатное решение с большой надёжностью и совместимостью, можно использовать и его, но максимальная совместимость с Windows будет у **Hyper-v**, который в бесплатной версии имеет достаточно широкий функционал.
4. KVM или Xen. Оба бесплатные и подойдут для тестирования програмных продуктов. Предпочтение всё же за **KVM**, т.к. он является нативным для большинства ядер Linux.


## Задача 2

Опишите сценарий миграции с VMware vSphere на Hyper-V для Linux и Windows виртуальных машин. Детально опишите необходимые шаги для использования всех преимуществ Hyper-V для Windows.

## Ответ:
Для миграция с VMware vSphere на Hyper-V необходимо, прежде всего, сконвертировать файл виртуального жесткого диска из одного формата в другой, после чего в Hyper-V создать виртуальную машину и подключить к ней образ жёсткого диска нужного формата.
Hyper-V это нативное для Windows ядро, поэтому работать на нём будет быстрее, т.к. может общаться с железом напрямую.


## Задача 3 

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был бы выбор, то вы бы создавали гетерогенную среду или нет? Мотивируйте ваш ответ примерами. 

## Ответ:
При использовании нескольких систем управления виртуализацией одновременно, конечно же, возникают и проблемы и сложности. Рассмотрю общие моменты:
- прежде всего, денежный вопрос, если обе системы платные, возникает вопрос в целесообразности такого решения
- обе системы будут пожирать ресурсы сервера на своё содержание
- для продакшена это "опасное решение", как минимум 2 точки отказа
- необходимо поддерживать обе системы, а это резервное копирование, мониторинг и решение проблем
- необходимо продумать, каким образом масштабировать подобные системы и как быстро и просто мигрировать из одной в другую

Возможно, если организовывать инфраструктуру, когда одна система управления виртуализацией находится внутри другой, то для каких нибудь тестов или специфических разработок такая организация могла бы подойти, но в подавляющем большинстве случаев целесообразно использовать одну универсальную систему управления виртуализацией, либо, в крайнем случае, две системы для разных ОС, например, Hyper-V для Windows виртуалок и KVM или Xen для Linux виртуалок.

---
